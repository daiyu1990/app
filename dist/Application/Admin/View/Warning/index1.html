<include file="Public:header"/>
<!-- begin #content -->
<div id="content" class="content content_waring" >
    <!-- begin page-header -->
    <h1 class="page-header page_warging"><!--{$title}-->
    	实时监控>>数据监测
    </h1>
    <!-- end page-header -->

    <!-- begin row -->
    <div class="row">
        <!-- begin col-12 -->
        <div class="col-md-12">
            <!-- begin panel -->
            <div class="panel panel-inverse">
                <div class="panel-body">
                    <div class="row organ-form_waring">
                       		<div class="clearfix fl oragan_infrl">
								<label class="organ-item">
									<span class="organ-itemt">设备类型：</span>
									<select class="organ-info cenz" >
										<option value="">移动设备</option>
										<option value="">PC设备</option>
										<option value="">iPad设备</option>
									</select>
								</label>
								<label class="organ-item">
									<span class="organ-itemt">产品编号：</span>
									<input type="text" class="organ-info" placeholder="输入产权编号"/>
								</label>
								<label class="organ-item">
									<span class="organ-itemt">在线状态：</span>
									<select class="organ-info cenz" >
										<option value="">移动设备</option>
										<option value="">PC设备</option>
										<option value="">iPad设备</option>
									</select>
								</label>
								<label class="organ-item">
									<span class="organ-itemt">所在地区：</span>
									<div class="layui-input-inline">
								      <select name="quiz1" class="organ-info check_inpld" >
								        <option value="">省（全部）</option>
								        <option value="浙江" selected="">浙江省</option>
								        <option value="江西">江西省</option>
								        <option value="福建">福建省</option>
								      <select>
								    </div>
								    <div class="layui-input-inline">
								      <select name="quiz2" class="organ-info check_inpld" >
								        <option value="">市（全部）</option>
								        <option value="杭州">杭州</option>
								        <option value="宁波" disabled="">宁波</option>
								        <option value="温州">温州</option>
								        <option value="温州">台州</option>
								        <option value="温州">绍兴</option>
								      <select>
								    </div>
								</label>
								<label class="organ-item">
									<span class="organ-itemt">工程名称：</span>
									<select class="organ-info cenz">
										<option>全部</option>
									</select>
								</label>

							</div>
							<div class="organ-formlt fl oagan_checkt">
								<a class="refer_equiplist refer">查询</a>
							</div>
                	</div>
                    <!--<div class="table-responsive">-->

	                    <table id="data-table" class="table tj_table waring_table">
	                        <thead>

	                        <tr>
	                        	<th class="class_waring" >
	                        		产权编号
	                        	</th>

	                        	<th class="table_slide">设备类型</th>
		                        <th class="table_slide">工程名称</th>
		                        <th class="table_slide">工地自编号</th>
		                        <th class="table_slide">施工单位</th>
		                        <th class="table_slide">操作员</th>

		                        <th>数据时间</th>
		                        <th>幅度</th>
		                        <th>高度</th>
		                        <th>回转</th>
		                        <th>重量</th>
		                        <th>力矩</th>
		                        <th>风速</th>
		                        <th>吊臂仰角</th>
		                        <th>一级警报</th>
		                        <th>在线状态</th>
		                        <th>工作状态</th>
		                        <th class="table_slidet">实时数据</th>
		                        <th class="table_slidet">当前位置</th>
		                        <th class="table_slidet">PLC监控</th>
		                       	<th class="table_slidet">视频监控</th>
		                        <th class="table_slidet">工况回放</th>
		                        <th class="table_slidet" style="border-right:1px solid #3399ff !important;">重点监控</th>
		                    </tr>
	                        </thead>
	                        <tbody id="table">

		                        <tr id="warging">

			                        <td class="slidebord class_waring" style="border-right:1px solid #3399ff !important;">
										{$info.cq_num}
			                        	<a class="table_slide_click" id="table_slidershow">
			                        		<img src="__PUBLIC__/assets/demo/image/prev.png"/>
			                        	</a>
			                        </td>
			                        <td class="table_slide">{$info.sb_type}</td>
		                        	<td class="table_slide">{$info.project_name}</td>
			                        <td class="table_slide">{$info.gd_zbh}</td>
			                        <td class="table_slide">{$info.danwei}</td>
			                        <td class="table_slide">{$info.czy}</td>
			                        <td>{$info.time}</td>
									<td>{$info.fudu}</td>
									<td>{$info.height}</td>
									<td>{$info.hz_jd}</td>
									<td>{$info.weight}</td>
									<td>{$info.liju}</td>
									<td>{$info.fengsu}</td>
									<td>{$info.db_yj}</td>
			                        <td>未安装牛腿销轴</td>
			                        <td>{$info.ol}</td>
			                        <td>{$info.work_type}</td>
			                        <td class="table_slidet"><a href="" id="organ_check"><i class="real_date"></i></a></td>
			                        <td class="table_slidet">
			                        	<a href="" id="organ_check"><i class="current_position"></i></a>

			                        </td>

			                        <td class="table_slidet"><a href="" id="organ_check"><i class="PLCmonitoring"></i></a></td>
			                        <td class="table_slidet"><a href="" id="organ_check"><i class="video_surveillance"></i></a></td>
			                        <td class="table_slidet"><a href="" id="organ_check"><i class="working_condition"></i></a></td>
			                        <td class="table_slidet" style="border-right:1px solid #3399ff !important;">
			                        	<a href="" id="organ_check"><i class="key_monitoring"></i></a>
			                        </td>
		                     	</tr>

		                        </tbody>
	                    </table>
                    <!--</div>-->
                   	<!--page-->
                   	<div class="paging_lister">
                   		<div id="demo7"></div>
                   	</div>
                </div>
                <!-- end panel-body -->
                <div class="panel_footer">
                	<div class="equip_title">

						<i class="equip_i"></i>

						<span class="alarm_info">报警信息统计图</span>
					</div>
					<!--柱状统计图-->
					<div class="Columnar_map row">
						<div class="col-md-4">
							<div class="Columnar_con" id="Columnar_con">
								<a class="Columnar_title">一级报警统计图</a>
								<div class="Columnar_chart" id="Columnar_chart" style="height: 250px;"></div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="Columnar_con" id="Columnar_con">
								<a class="Columnar_title Columnar_titles">报警统计图</a>
								<div class="Columnar_chart " id="Columnar_charts" style="height: 250px;"></div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="Columnar_con" id="Columnar_con">
								<a class="Columnar_title Columnar_titlet">预警统计图</a>
								<div class="Columnar_chart " id="Columnar_chartt" style="height: 250px;"></div>
							</div>
						</div>
					</div>

                </div>
            </div>
            <!-- end panel -->
        </div>
        <!-- end col-12 -->
    </div>
    <!-- end row -->
</div>
<!-- end #content -->



<include file="Public:footer"/>

<script>
var timer=null;
window.onload=function(){

	timer=setInterval("getData()",7000);
}





function getData(){

	$.ajax({
		url:"{:U('Admin/Warning/index')}",
		dataType:'json',
		type:'post',
		data:{
			'do':'refresh'
		},
		success:function(e){
			var html = '<tr id="warging">'+

				'<td class="slidebord class_waring" style="border-right:1px solid #3399ff !important;">'+
					e.cq_num+
					'<a class="table_slide_click" id="table_slidershow">'+
						'<img src="__PUBLIC__/assets/demo/image/prev.png"/>'+
					'</a>'+
				'</td>'+
				'<td class="table_slide">'+e.sb_type+'</td>'+
				'<td class="table_slide">'+e.project_name+'</td>'+
				'<td class="table_slide">'+e.gd_zbh+'</td>'+
				'<td class="table_slide">'+e.danwei+'</td>'+
				'<td class="table_slide">'+e.czy+'</td>'+
				'<td>'+e.time+'</td>'+
				'<td>'+e.fudu+'</td>'+
				'<td>'+e.height+'</td>'+
				'<td>'+e.hz_jd+'</td>'+
				'<td>'+e.weight+'</td>'+
				'<td>'+e.liju+'</td>'+
				'<td>'+e.fengsu+'</td>'+
				'<td>'+e.db_yj+'</td>'+
				'<td>未安装牛腿销轴</td>'+
				'<td>'+e.ol+'</td>'+
				'<td>'+e.work_type+'</td>'+
				'<td class="table_slidet"><a href="" id="organ_check"><i class="real_date"></i></a></td>'+
				'<td class="table_slidet">'+
					'<a href="" id="organ_check"><i class="current_position"></i></a>'+

				'</td>'+

				'<td class="table_slidet"><a href="" id="organ_check"><i class="PLCmonitoring"></i></a></td>'+
				'<td class="table_slidet"><a href="" id="organ_check"><i class="video_surveillance"></i></a></td>'+
				'<td class="table_slidet"><a href="" id="organ_check"><i class="working_condition"></i></a></td>'+
				'<td class="table_slidet" style="border-right:1px solid #3399ff !important;">'+
					'<a href="" id="organ_check"><i class="key_monitoring"></i></a>'+
				'</td>'+
			'</tr>';

			$('#table').html(html);

		}
	})
}

			var war_state=0;
			$('.table_slide').hide();
			$('.table_slidet').hide();
		$('#table_slidershow').click(function() {
			clearInterval(timer)
			war_state == 1 ? war_state = 0 : war_state = 1;

			$('.table_slide').toggle();
			$('.table_slidet').toggle();
			war_state == 0 ? $(this).children('img').attr('src', '/Public/assets/demo/image/prev.png') : $(this).children('img').attr('src', '/Public/assets/demo/image/next.png');

			layui.use(['laypage', 'layer'], function () {
				var laypage = layui.laypage,
						layer = layui.layer;

				laypage({
					cont: 'demo7',
					pages: 100,
					skin: '#3399ff',
					skip: true,
					first: '<em><<</em>',
					last: '<em>>></em>',
					prev: '<em><</em>',
					next: '<em>></em>'

				});



			});
//一级报警统计图
			var mychart = echarts.init(document.getElementById('Columnar_chart'));
			mychart.title = '坐标轴刻度与标签对齐';

			option = {

				color: ['#3398DB'],
				tooltip: {
					trigger: 'axis',
					axisPointer: {            // 坐标轴指示器，坐标轴触发有效
						type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					}
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis: [
					{
						type: 'category',
						data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
						axisTick: {
							alignWithLabel: true
						}
					}
				],
				yAxis: [
					{
						type: 'value'
					}
				],
				series: [
					{
						name: '直接访问',
						type: 'bar',
						barWidth: '60%',
						data: [10, 52, 200, 334, 390, 330, 220]
					}
				]
			};
			mychart.setOption(option);
			$(window).resize(function () {
				mychart.resize();
			});
//报警统计图
			var mychartt = echarts.init(document.getElementById('Columnar_chartt'));
			mychartt.title = '坐标轴刻度与标签对齐';

			option = {

				color: ['#3398DB'],
				tooltip: {
					trigger: 'axis',
					axisPointer: {            // 坐标轴指示器，坐标轴触发有效
						type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					}
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis: [
					{
						type: 'category',
						data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
						axisTick: {
							alignWithLabel: true
						}
					}
				],
				yAxis: [
					{
						type: 'value'
					}
				],
				series: [
					{
						name: '直接访问',
						type: 'bar',
						barWidth: '60%',
						data: [10, 52, 200, 334, 390, 330, 220]
					}
				]
			};
			mychartt.setOption(option);
			$(window).resize(function () {
				mychartt.resize();
			});
//预警统计图
			var mycharts = echarts.init(document.getElementById('Columnar_charts'));
			mycharts.title = '坐标轴刻度与标签对齐';

			option = {

				color: ['#3398DB'],
				tooltip: {
					trigger: 'axis',
					axisPointer: {            // 坐标轴指示器，坐标轴触发有效
						type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					}
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis: [
					{
						type: 'category',
						data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
						axisTick: {
							alignWithLabel: true
						}
					}
				],
				yAxis: [
					{
						type: 'value'
					}
				],
				series: [
					{
						name: '直接访问',
						type: 'bar',
						barWidth: '60%',
						data: [10, 52, 200, 334, 390, 330, 220]
					}
				]
			};
			mycharts.setOption(option);
			$(window).resize(function(){
				mycharts.resize();
			})
</script>