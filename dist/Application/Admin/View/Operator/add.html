<include file="Public:header"/>
<!-- begin #content -->
<div id="content" class="content">
  <!-- begin page-header -->
  <h1 class="page-header">{$title}</h1>
  <!-- end page-header -->   
  <!-- begin row -->
  <div class="row">
    <!-- begin col-6 -->
    <div class="col-md-12 admin-grid index-chart">
      <!-- begin panel -->
      <div class="panel panel-inverse" data-sortable-id="form-stuff-1">
        <div class="panel-body">
          <form class="form-horizontal" method='post' action='{:U("Operator/".ACTION_NAME)}'>
            <input type='hidden' name='do' value='save'/>
            <if condition="ACTION_NAME eq 'edit'"> 
              <input type='hidden' name='id' value='{$info.id}'/>
            </if>

            <div class="form-group">
              <label class="col-md-3 control-label">选择人员</label>
              <div class="col-lg-5">
                <button class="btn btn-info btn-sm" type="button" id="chose_user">选择</button>
                <input type="hidden" name="uid" id="uid" value="{$info.uid}">
              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">姓名</label>
              <div class="col-lg-5">
                <label style="text-align: left;width:100%;" class="col-md-3 control-label" id="name">{$info.nicename}</label>

              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">电话</label>
              <div class="col-lg-5">
                <label style="text-align: left;width:100%;" class="col-md-3 control-label" id="mobile">{$info.mobile}</label>

              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">身份证</label>
              <div class="col-lg-5">
                <label style="text-align: left;width:100%;" class="col-md-3 control-label" id="IDcard">{$info.IDcard}</label>

              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">人员编号</label>
              <div class="col-lg-5">
                <label style="text-align: left;width:100%;" class="col-md-3 control-label" id="person_code">{$info.person_code}</label>

              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">岗位</label>
              <div class="col-lg-5">
                <select class="form-control" name="station">
                  <option value="">请选择岗位</option>
                  <?php foreach($station as $k=>$v){ ?>
                    <?php if($v['id']==$info['station']): ?>
                      <option selected="selected" value="{$v['id']}">{$v['name']}</option>
                    <?php else: ?>
                      <option value="{$v['id']}">{$v['name']}</option>
                    <?php endif; ?>

                  <?php } ?>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">特种工作证号</label>
              <div class="col-lg-5">
                <input class="form-control" type="text" name="work_code" placeholder="特种工作证号" value="{$info.work_code}">
              </div>
            </div>


            <div class="form-group">
              <div class="col-sm-offset-3 col-sm-2">
                  <a href="{:U('Operator/index')}" class='btn btn-sm btn-default m-r-5 btn-block'>返 回</a>
              </div>
              <div class="col-sm-2">
                
                <button type="submit" class="btn btn-sm btn-danger btn-block">提 交</button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <!-- end panel -->
    </div>
    <!-- end col-6 -->
  </div>
  <!-- end row -->
</div>
<!-- end #content -->
<script type='text/javascript'>


  var Page = {
    init:function(){
      this.bind();
    },
    bind:function(){
      var _this = this;

      $(function(){
        $('form').validator({
          theme:'yellow_top',
          msgClass:'n-right',
          msgIcon:'',
          msgMaker: function(opt){
            if(!opt.msg){
              return '';
            }
            return '<span class="msg-wrap n-error" role="alert"><span class="n-msg">'+opt.msg+'</span></span>'
          },
          messages: {
            match:{
              eq:"两次输入密码不一致！"
            }
          },
          fields: {
            'uid': "人员:required",
            'station': "岗位:required",
            'work_code': "特种工作证号:required",

          }
        });
      })



      $('#chose_user').click(function(){


        $.ajax({
          url:"{:U('/Admin/Operator/user')}",
//          dataType:'json',
          type:'post',
          success:function(e){

            console.log(e);

            layer.open({
              title: '用户列表',
              type: 1,
              skin: 'layui-layer-demo', //加上边框
              anim: 5,
              area: ['750px', '600px'], //宽高
              content: e
            });
          }
        })

//        console.log(456);
//        return false;
      })


    },

    openLayer: function(title,url,width,height){
      if(width == ''){
        width = '1200px';
      }
      if(height == ''){
        height = '650px';
      }
      layer.open({
        type: 2,
        title: title,
        area: [width, height], //宽高
        closeBtn: 1, //不显示关闭按钮
        shift: 2,
        shadeClose: true, //开启遮罩关闭
        content: url
      });
    },
  }
  $(function(){
    Page.init();
  })
</script>
<include file="Public:footer"/>